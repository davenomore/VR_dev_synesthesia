(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))r(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const o of t.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function s(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?t.credentials="include":e.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function r(e){if(e.ep)return;e.ep=!0;const t=s(e);fetch(e.href,t)}})();const u="MusicDatabase",i="tracks",d=1,l={openDB:function(){return new Promise((c,n)=>{const s=indexedDB.open(u,d);s.onerror=r=>n("DB Error: "+r.target.error),s.onupgradeneeded=r=>{const e=r.target.result;e.objectStoreNames.contains(i)||e.createObjectStore(i)},s.onsuccess=r=>c(r.target.result)})},saveTrack:async function(c){if(!c)return;const n=await this.openDB();return new Promise((s,r)=>{const o=n.transaction([i],"readwrite").objectStore(i).put(c,"current_track");o.onsuccess=()=>s(!0),o.onerror=a=>r(a.target.error)})},getTrack:async function(){const c=await this.openDB();return new Promise((n,s)=>{const t=c.transaction([i],"readonly").objectStore(i).get("current_track");t.onsuccess=o=>{const a=o.target.result;n(a||null)},t.onerror=o=>s(o.target.error)})}};export{l as M};
